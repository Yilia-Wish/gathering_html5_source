var h=void 0,i=null;function k(){return function(){}}var l,aa=aa||{},m=this;function ba(a){for(var a=a.split("."),b=m,c;c=a.shift();)if(b[c]!=i)b=b[c];else return i;return b}function ca(){}
function p(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function q(a){return p(a)=="array"}function s(a){var b=p(a);return b=="array"||b=="object"&&typeof a.length=="number"}function u(a){return typeof a=="string"}function da(a){var b=typeof a;return b=="object"&&a!=i||b=="function"}function v(a){return a[ea]||(a[ea]=++fa)}var ea="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),fa=0;function ga(a,b,c){return a.call.apply(a.bind,arguments)}
function ha(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}function w(a,b,c){w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ga:ha;return w.apply(i,arguments)}var ia=Date.now||function(){return+new Date};
function x(a,b){function c(){}c.prototype=b.prototype;a.Y=b.prototype;a.prototype=new c};function ja(a){this.stack=Error().stack||"";if(a)this.message=String(a)}x(ja,Error);ja.prototype.name="CustomError";function ka(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function la(a){if(!ma.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(na,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(oa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(pa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(qa,"&quot;"));return a}var na=/&/g,oa=/</g,pa=/>/g,qa=/\"/g,ma=/[&<>\"]/;function ra(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function sa(a,b){b.unshift(a);ja.call(this,ka.apply(i,b));b.shift();this.Ib=a}x(sa,ja);sa.prototype.name="AssertionError";function ta(a,b){throw new sa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var y=Array.prototype,ua=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=c==i?0:c<0?Math.max(0,a.length+c):c;if(u(a))return!u(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=u(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)};function wa(a){return y.concat.apply(y,arguments)}
function xa(a){if(q(a))return wa(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function ya(a,b,c){return arguments.length<=2?y.slice.call(a,b):y.slice.call(a,b,c)};function za(a,b){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var d=ya(arguments,1),f;f=c;for(var e=0,g=0;g<d.length;g++)ua(f,d[g])>=0||(f.push(d[g]),e++);f=e==d.length;a.className=c.join(" ");return f};function Aa(a,b){for(var c in a)b.call(h,a[c],c,a)}function Ba(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ca(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Da="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Ea(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Da.length;e++)c=Da[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var z,Fa,Ga,Ha;function Ia(){return m.navigator?m.navigator.userAgent:i}Ha=Ga=Fa=z=!1;var Ja;if(Ja=Ia()){var Ka=m.navigator;z=Ja.indexOf("Opera")==0;Fa=!z&&Ja.indexOf("MSIE")!=-1;Ga=!z&&Ja.indexOf("WebKit")!=-1;Ha=!z&&!Ga&&Ka.product=="Gecko"}var La=z,A=Fa,B=Ha,C=Ga,Ma=m.navigator,Na=(Ma&&Ma.platform||"").indexOf("Mac")!=-1,Oa;
a:{var Pa="",Qa;if(La&&m.opera)var Ra=m.opera.version,Pa=typeof Ra=="function"?Ra():Ra;else if(B?Qa=/rv\:([^\);]+)(\)|;)/:A?Qa=/MSIE\s+([^\);]+)(\)|;)/:C&&(Qa=/WebKit\/(\S+)/),Qa)var Sa=Qa.exec(Ia()),Pa=Sa?Sa[1]:"";if(A){var Ta,Ua=m.document;Ta=Ua?Ua.documentMode:h;if(Ta>parseFloat(Pa)){Oa=String(Ta);break a}}Oa=Pa}var Va={};
function D(a){var b;if(!(b=Va[a])){b=0;for(var c=String(Oa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;b==0&&e<f;e++){var g=c[e]||"",j=d[e]||"",n=RegExp("(\\d*)(\\D*)","g"),r=RegExp("(\\d*)(\\D*)","g");do{var G=n.exec(g)||["","",""],t=r.exec(j)||["","",""];if(G[0].length==0&&t[0].length==0)break;b=ra(G[1].length==0?0:parseInt(G[1],10),t[1].length==0?0:parseInt(t[1],10))||ra(G[2].length==0,t[2].length==
0)||ra(G[2],t[2])}while(b==0)}b=Va[a]=b>=0}return b}var Wa={};function Xa(){return Wa[9]||(Wa[9]=A&&!!document.documentMode&&document.documentMode>=9)};var Ya=!A||Xa();!B&&!A||A&&Xa()||B&&D("1.9.1");A&&D("9");function F(a){return u(a)?document.getElementById(a):a}function Za(){var a=document;if($a(a))return a.querySelectorAll(".state_container");else if(a.getElementsByClassName)return a.getElementsByClassName("state_container");return ab()}function $a(a){return a.querySelectorAll&&a.querySelector&&(!C||document.compatMode=="CSS1Compat"||D("528"))}
function ab(){var a,b,c,d;a=document;if($a(a))return a.querySelectorAll(".state_container");if(a.getElementsByClassName){var f=a.getElementsByClassName("state_container");return f}f=a.getElementsByTagName("*");d={};for(b=c=0;a=f[b];b++){var e=a.className;typeof e.split=="function"&&ua(e.split(/\s+/),"state_container")>=0&&(d[c++]=a)}d.length=c;return d}
function bb(a,b){Aa(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in cb?a.setAttribute(cb[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var cb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function db(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!Ya&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',la(g.name),'"');if(g.type){e.push(' type="',la(g.type),'"');var j={};Ea(j,g);g=j;delete g.type}e.push(">");e=e.join("")}e=f.createElement(e);if(g)u(g)?e.className=g:q(g)?za.apply(i,[e].concat(g)):bb(e,g);d.length>2&&eb(f,e,d);return e}
function eb(a,b,c){function d(c){c&&b.appendChild(u(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];s(e)&&!(da(e)&&e.nodeType>0)?va(fb(e)?xa(e):e,d):d(e)}}function gb(a){var b=document,c=b.createElement("div");A?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(c.childNodes.length==1)return c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);return a}}
function hb(a){var b,c=a.parentNode;if(c&&c.nodeType!=11)if(a.removeNode)a.removeNode(!1);else{for(;b=a.firstChild;)c.insertBefore(b,a);a&&a.parentNode&&a.parentNode.removeChild(a)}}function fb(a){if(a&&typeof a.length=="number")if(da(a))return typeof a.item=="function"||typeof a.item=="string";else if(p(a)=="function")return typeof a.item=="function";return!1};function ib(){}var jb=0;l=ib.prototype;l.key=0;l.z=!1;l.ra=!1;l.Q=function(a,b,c,d,f,e){if(p(a)=="function")this.Ea=!0;else if(a&&a.handleEvent&&p(a.handleEvent)=="function")this.Ea=!1;else throw Error("Invalid listener argument");this.H=a;this.Ra=b;this.src=c;this.type=d;this.capture=!!f;this.ia=e;this.ra=!1;this.key=++jb;this.z=!1};l.handleEvent=function(a){return this.Ea?this.H.call(this.ia||this.src,a):this.H.handleEvent.call(this.H,a)};!A||Xa();var kb=!A||Xa(),lb=A&&!D("8");!C||D("528");B&&D("1.9b")||A&&D("8")||La&&D("9.5")||C&&D("528");!B||D("8");function mb(){}mb.prototype.wa=!1;mb.prototype.M=function(){if(!this.wa)this.wa=!0,this.n()};mb.prototype.n=function(){this.ab&&nb.apply(i,this.ab)};function nb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];s(d)?nb.apply(i,d):d&&typeof d.M=="function"&&d.M()}};function H(a,b){this.type=a;this.currentTarget=this.target=b}x(H,mb);H.prototype.n=function(){delete this.type;delete this.target;delete this.currentTarget};H.prototype.w=!1;H.prototype.J=!0;H.prototype.preventDefault=function(){this.J=!1};function ob(a){ob[" "](a);return a}ob[" "]=ca;function I(a,b){a&&this.Q(a,b)}x(I,H);l=I.prototype;l.target=i;l.relatedTarget=i;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.pb=!1;l.ga=i;
l.Q=function(a,b){var c=this.type=a.type;H.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(B){var f;a:{try{ob(d.nodeName);f=!0;break a}catch(e){}f=!1}f||(d=i)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=C||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=C||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pb=Na?a.metaKey:a.ctrlKey;this.state=a.state;this.ga=a;delete this.J;delete this.w};
l.preventDefault=function(){I.Y.preventDefault.call(this);var a=this.ga;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,lb)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};l.n=function(){I.Y.n.call(this);this.relatedTarget=this.currentTarget=this.target=this.ga=i};var J={},K={},L={},M={};
function N(a,b,c,d,f){if(b)if(q(b))for(var e=0;e<b.length;e++)N(a,b[e],c,d,f);else{var d=!!d,g=K;b in g||(g[b]={b:0,g:0});g=g[b];d in g||(g[d]={b:0,g:0},g.b++);var g=g[d],j=v(a),n;g.g++;if(g[j]){n=g[j];for(e=0;e<n.length;e++)if(g=n[e],g.H==c&&g.ia==f){if(g.z)break;return}}else n=g[j]=[],g.b++;e=pb();e.src=a;g=new ib;g.Q(c,e,a,b,d,f);c=g.key;e.key=c;n.push(g);J[c]=g;L[j]||(L[j]=[]);L[j].push(g);a.addEventListener?(a==m||!a.va)&&a.addEventListener(b,e,d):a.attachEvent(b in M?M[b]:M[b]="on"+b,e)}else throw Error("Invalid event type");
}function pb(){var a=qb,b=kb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function O(a,b,c,d,f){if(q(b))for(var e=0;e<b.length;e++)O(a,b[e],c,d,f);else{d=!!d;a:{e=K;if(b in e&&(e=e[b],d in e&&(e=e[d],a=v(a),e[a]))){a=e[a];break a}a=i}if(a)for(e=0;e<a.length;e++)if(a[e].H==c&&a[e].capture==d&&a[e].ia==f){rb(a[e].key);break}}}
function rb(a){if(J[a]){var b=J[a];if(!b.z){var c=b.src,d=b.type,f=b.Ra,e=b.capture;c.removeEventListener?(c==m||!c.va)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in M?M[d]:M[d]="on"+d,f);c=v(c);f=K[d][e][c];if(L[c]){var g=L[c],j=ua(g,b);j>=0&&y.splice.call(g,j,1);g.length==0&&delete L[c]}b.z=!0;f.Ha=!0;sb(d,e,c,f);delete J[a]}}}
function sb(a,b,c,d){if(!d.R&&d.Ha){for(var f=0,e=0;f<d.length;f++)d[f].z?d[f].Ra.src=i:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Ha=!1;e==0&&(delete K[a][b][c],K[a][b].b--,K[a][b].b==0&&(delete K[a][b],K[a].b--),K[a].b==0&&delete K[a])}}function tb(a){var b,c=0,d=b==i;b=!!b;if(a==i)Aa(L,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)rb(f.key),c++}});else if(a=v(a),L[a])for(var a=L[a],f=a.length-1;f>=0;f--){var e=a[f];if(d||b==e.capture)rb(e.key),c++}}
function ub(a,b,c,d,f){var e=1,b=v(b);if(a[b]){a.g--;a=a[b];a.R?a.R++:a.R=1;try{for(var g=a.length,j=0;j<g;j++){var n=a[j];n&&!n.z&&(e&=vb(n,f)!==!1)}}finally{a.R--,sb(c,d,b,a)}}return Boolean(e)}function vb(a,b){var c=a.handleEvent(b);a.ra&&rb(a.key);return c}
function wb(a,b){var c=b.type||b,d=K;if(!(c in d))return!0;if(u(b))b=new H(b,a);else if(b instanceof H)b.target=b.target||a;else{var f=b,b=new H(c,a);Ea(b,f)}var f=1,e,d=d[c],c=!0 in d,g;if(c){e=[];for(g=a;g;g=g.oa)e.push(g);g=d[!0];g.g=g.b;for(var j=e.length-1;!b.w&&j>=0&&g.g;j--)b.currentTarget=e[j],f&=ub(g,e[j],b.type,!0,b)&&b.J!=!1}if(!1 in d)if(g=d[!1],g.g=g.b,c)for(j=0;!b.w&&j<e.length&&g.g;j++)b.currentTarget=e[j],f&=ub(g,e[j],b.type,!1,b)&&b.J!=!1;else for(d=a;!b.w&&d&&g.g;d=d.oa)b.currentTarget=
d,f&=ub(g,d,b.type,!1,b)&&b.J!=!1;return Boolean(f)}
function qb(a,b){if(!J[a])return!0;var c=J[a],d=c.type,f=K;if(!(d in f))return!0;var f=f[d],e,g;if(!kb){e=b||ba("window.event");var j=!0 in f,n=!1 in f;if(j){if(e.keyCode<0||e.returnValue!=h)return!0;a:{var r=!1;if(e.keyCode==0)try{e.keyCode=-1;break a}catch(G){r=!0}if(r||e.returnValue==h)e.returnValue=!0}}r=new I;r.Q(e,this);e=!0;try{if(j){for(var t=[],o=r.currentTarget;o;o=o.parentNode)t.push(o);g=f[!0];g.g=g.b;for(var E=t.length-1;!r.w&&E>=0&&g.g;E--)r.currentTarget=t[E],e&=ub(g,t[E],d,!0,r);if(n){g=
f[!1];g.g=g.b;for(E=0;!r.w&&E<t.length&&g.g;E++)r.currentTarget=t[E],e&=ub(g,t[E],d,!1,r)}}else e=vb(c,r)}finally{if(t)t.length=0;r.M()}return e}d=new I(b,this);try{e=vb(c,d)}finally{d.M()}return e};var xb;function yb(a,b,c){this.Za=b;this.K=c;H.call(this,a)}x(yb,H);function P(a){this.S=a;N(this.S,"set_attribute",this.ma,!1,this)}P.prototype.ma=k();P.prototype.c=k();P.prototype.i=k();function zb(a){P.call(this,a)}x(zb,P);zb.prototype.c=function(){this.t=F("backbutton");this.ub=F("donebutton");this.Wa=F("accountform");this.gb=F("invitation_code");this.Mb=F("tos")};(function(a){var b={},c=a.Object,d=c.defineProperty,f=b.hasOwnProperty,e=c.preventExtensions||c.freeze||c.seal||k();b.value=1;try{if(!d||!d(b,"_",b).Cb)throw"set";return function(a){var b={},c,g;for(g in a)if(f.call(a,g))c=a[g],c.enumerable=1,c.configurable=0,d(b,g,c);e(b);return b}}catch(g){return"__defineGetter__"in b?function(a){var b={},c,d;for(d in a)if(f.call(a,d))c=a[d],f.call(c,"value")?f.call(c,"writable")&&c.writable?b[d]=c.value:(b.__defineGetter__(d,function(a){return function(){return a}}(c.value)),
b.__defineSetter__(d,function(){throw"read-only";})):(f.call(c,"get")&&b.__defineGetter__(d,c.get),f.call(c,"set")&&b.__defineSetter__(d,c.set));e(b);return b}:(id=0,a.execScript("Function execVBScript(code)\nExecuteGlobal(code)\nEnd Function","VBScript"),function(b){var c="StaticObject"+id++,d=["Class "+c,"Private o"],e={},g,o;for(o in b)if(f.call(b,o))if(g=b[o],f.call(g,"value"))e[o]=g.value,d.push("Public Property Get "+o,o+"=o."+o,"End Property"),f.call(g,"writable")&&g.writable&&d.push("Public Property Let "+
o+"(value)","o."+o+"=value","End Property");else{if(f.call(g,"get"))e[o]=g.get,d.push("Public Property Get "+o,o+"=o."+o+"()","End Property");if(f.call(g,"set"))e[o]=g.set,d.push("Public Property Let "+o+"(value)","o."+o+"(value)","End Property")}d.push("Private Sub Class_Initialize()","Set o="+c+"JS()","End Sub","End Class","Function "+c+"Factory()","Dim o","Set o=New "+c,"Set "+c+"Factory=o","End Function");a[c+"JS"]=function(){a[c+"JS"]=i;return e};execVBScript(d.join("\n"));return a[c+"Factory"]()})}})(this);function Q(){}x(Q,mb);l=Q.prototype;l.va=!0;l.oa=i;l.addEventListener=function(a,b,c,d){N(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){O(this,a,b,c,d)};l.dispatchEvent=function(a){return wb(this,a)};l.n=function(){Q.Y.n.call(this);tb(this);this.oa=i};function R(){this.e={}}x(R,Q);function Ab(a,b,c,d){var f={};a[b+"_"]=c==h?i:c;f.get=function(){var c="";return c=a[b+"_"]};f.set=function(c){d!="readonly"&&(a[b+"_"]=d!=h&&d!=i?d(c):c);c=f.get();if(a.e[b]!=c){var g=new yb("set_attribute",b,c);wb(a,g);a.e[b]=c}};return a[b]=f};function Bb(){this.e={}}x(Bb,R);var Cb;(Cb="ScriptEngine"in m&&m.ScriptEngine()=="JScript")&&(m.ScriptEngineMajorVersion(),m.ScriptEngineMinorVersion(),m.ScriptEngineBuildVersion());function S(a,b){this.j=Cb?[]:"";a!=i&&this.append.apply(this,arguments)}S.prototype.set=function(a){this.clear();this.append(a)};Cb?(S.prototype.ba=0,S.prototype.append=function(a,b,c){b==i?this.j[this.ba++]=a:(this.j.push.apply(this.j,arguments),this.ba=this.j.length);return this}):S.prototype.append=function(a,b,c){this.j+=a;if(b!=i)for(var d=1;d<arguments.length;d++)this.j+=arguments[d];return this};S.prototype.clear=function(){Cb?this.ba=this.j.length=0:this.j=""};
S.prototype.toString=function(){if(Cb){var a=this.j.join("");this.clear();a&&this.append(a);return a}else return this.j};A&&D(8);function T(a){return typeof a==="object"&&a&&a.Db===0?a.content:String(a).replace(Db,Eb)}var Fb={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\u000b":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Eb(a){return Fb[a]}var Db=/[\x00\x22\x26\x27\x3c\x3e]/g;var Gb={N:function(a,b){var c=b||new S;c.append('\t<form id="loginform"><p class="wp7">Email Address</p><input class="textfield" id="email" name="email" type="email" placeholder="Email Address"/><br/><p class="wp7">Password</p><input class="textfield" id="password" name="password" type="password" placeholder="Password"/><input class="visuallyhidden" type="submit"/><p><div id="no_account_link">I don\'t have an account yet.</div></p></form>');if(!b)return c.toString()}};function Hb(a){if(a==h||a==!1||a==-1||a==i||a=="")return"";var b=new Date(a*1E3),a=b.getHours(),c="";a<10?a="0"+a:a>12&&(a-=12,c="pm");b=b.getMinutes();b<10&&(b="0"+b);return a+":"+b+" "+c}
function Ib(a){if(a==h||a==!1||a==-1||a==i||a=="")return"";a=Math.round((+new Date-new Date(a*1E3))/1E3);month=2419200;year=month*12;var b;a>0?a<30?b="just now":a<60?b=a+" seconds ago":a<120?b="a minute ago":a<3600?b=Math.floor(a/60)+" minutes ago":Math.floor(a/3600)==1?b="1 hour ago":a<86400?b=Math.floor(a/3600)+" hours ago":a<172800?b="yesterday":a<604800?b=Math.floor(a/86400)+" days ago":a<1209600?b="a week ago":a<month?b=Math.floor(a/604800)+" weeks ago":a<2*month?b="a month ago":a<year?b=Math.floor(a/
month)+" months ago":a<2*year?b="a year ago":a>=2*year&&(b=Math.floor(a/year)+" years ago"):(a*=-1,a<60?b="in "+a+" seconds":a<120?b="in a minute":a<3600?b="in "+Math.floor(a/60)+" minutes":Math.floor(a/3600)==1?b="in 1 hour":a<86400?b="in "+Math.floor(a/3600)+" hours":a<172800?b="tomorrow":a<604800?b="in "+Math.floor(a/86400)+" days":a<1209600?b="in a week":a<month?b="in "+Math.floor(a/604800)+" weeks":a<2*month?b="in a month":a<year?b="in "+Math.floor(a/month)+" months":a<2*year?b="in a year":a>=
2*year&&(b="in "+Math.floor(a/year)+" years"));return b};function Jb(a,b){this.data=b;H.call(this,a)}x(Jb,H);function Kb(){this.e={};this.u=document.createElement("canvas");this.ca=!(!this.u.getContext||!this.u.getContext("2d"))}x(Kb,Q);Kb.prototype.isSupported=function(){return this.ca&&(!this.ca?!1:document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")==0)};
function Lb(a,b,c){if(a.ca&&b.type.match(/image.*/)){var d=document.createElement("img"),f=new FileReader;f.onload=function(b){d.src=b.target.result;a:{var b=d.width,f=d.height;b>800&&(f*=800/b,b=800);a.u.width=b;a.u.height=f;a.u.getContext("2d").drawImage(d,0,0,b,f);b=a.u.toDataURL("image/jpeg");if(!(typeof b=="string"&&b.length>30)&&(b=a.u.toDataURL("image/png"),!(typeof b=="string"&&b.length>30))){b=i;break a}b=(f=Mb(b))?{type:"blob",file:f}:{type:"base64",file:b.replace(/^data:image\/(png|jpg|jpeg);base64,/,
"")}}typeof c=="function"&&c(b)};f.readAsDataURL(b);return!0}else return!1}
function Mb(a){if(typeof window.Uint8Array=="undefined")return i;var b;b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):unescape(a.split(",")[1]);for(var a=a.split(",")[0].split(":")[1].split(";")[0],c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));b=new Uint8Array(c);if(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return typeof window.Blob==
"function"?new Blob([b],{type:a}):window.BlobBuilder?(c=new BlobBuilder,c.append(b),c.getBlob(a)):i};var Nb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");var Ob=m.window;function Pb(a){if(typeof a.O=="function")return a.O();if(u(a))return a.split("");if(s(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ba(a)}function Qb(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(s(a)||u(a))va(a,b,c);else{var d;if(typeof a.ha=="function")d=a.ha();else if(typeof a.O!="function")if(s(a)||u(a)){d=[];for(var f=a.length,e=0;e<f;e++)d.push(e)}else d=Ca(a);else d=h;for(var f=Pb(a),e=f.length,g=0;g<e;g++)b.call(c,f[g],d&&d[g],a)}};function Rb(a,b){this.o={};this.d=[];var c=arguments.length;if(c>1){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Rb?(c=a.ha(),d=a.O()):(c=Ca(a),d=Ba(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}l=Rb.prototype;l.b=0;l.Xa=0;l.O=function(){Sb(this);for(var a=[],b=0;b<this.d.length;b++)a.push(this.o[this.d[b]]);return a};l.ha=function(){Sb(this);return this.d.concat()};
l.clear=function(){this.o={};this.Xa=this.b=this.d.length=0};function Sb(a){if(a.b!=a.d.length){for(var b=0,c=0;b<a.d.length;){var d=a.d[b];Object.prototype.hasOwnProperty.call(a.o,d)&&(a.d[c++]=d);b++}a.d.length=c}if(a.b!=a.d.length){for(var f={},c=b=0;b<a.d.length;)d=a.d[b],Object.prototype.hasOwnProperty.call(f,d)||(a.d[c++]=d,f[d]=1),b++;a.d.length=c}}l.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.o,a)?this.o[a]:b};
l.set=function(a,b){Object.prototype.hasOwnProperty.call(this.o,a)||(this.b++,this.d.push(a),this.Xa++);this.o[a]=b};function Tb(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Ub(){this.V=h}function Vb(a){var b=[];Wb(new Ub,a,b);return b.join("")}
function Wb(a,b,c){switch(typeof b){case "string":Xb(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==i){c.push("null");break}if(q(b)){var d=b.length;c.push("[");for(var f="",e=0;e<d;e++)c.push(f),f=b[e],Wb(a,a.V?a.V.call(b,String(e),f):f,c),f=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],typeof f!="function"&&(c.push(d),Xb(e,c),c.push(":"),
Wb(a,a.V?a.V.call(b,e,f):f,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var Yb={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},Zb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Xb(a,b){b.push('"',a.replace(Zb,function(a){if(a in Yb)return Yb[a];var b=a.charCodeAt(0),f="\\u";b<16?f+="000":b<256?f+="00":b<4096&&(f+="0");return Yb[a]=f+b.toString(16)}),'"')};function $b(){}$b.prototype.L=i;var ac;function bc(){}x(bc,$b);function cc(a){return(a=dc(a))?new ActiveXObject(a):new XMLHttpRequest}function ec(a){var b={};dc(a)&&(b[0]=!0,b[1]=!0);return b}bc.prototype.ja=i;
function dc(a){if(!a.ja&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.ja=d}catch(f){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.ja}ac=new bc;function fc(a){return gc(a||arguments.callee.caller,[])}
function gc(a,b){var c=[];if(ua(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(hc(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){f>0&&c.push(", ");var e;e=d[f];switch(typeof e){case "object":e=e?"object":"null";break;case "string":break;case "number":e=String(e);break;case "boolean":e=e?"true":"false";break;case "function":e=(e=hc(e))?e:"[fn]";break;default:e=typeof e}e.length>40&&(e=e.substr(0,40)+"...");c.push(e)}b.push(a);c.push(")\n");try{c.push(gc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function hc(a){if(ic[a])return ic[a];a=String(a);if(!ic[a]){var b=/function ([^\(]+)/.exec(a);ic[a]=b?b[1]:"[Anonymous]"}return ic[a]}var ic={};function U(a,b,c,d,f){this.reset(a,b,c,d,f)}U.prototype.qb=0;U.prototype.za=i;U.prototype.ya=i;var jc=0;U.prototype.reset=function(a,b,c,d,f){this.qb=typeof f=="number"?f:jc++;this.Lb=d||ia();this.G=a;this.ib=b;this.Hb=c;delete this.za;delete this.ya};U.prototype.Va=function(a){this.G=a};function V(a){this.jb=a}V.prototype.T=i;V.prototype.G=i;V.prototype.ea=i;V.prototype.Ba=i;function kc(a,b){this.name=a;this.value=b}kc.prototype.toString=function(){return this.name};var lc=new kc("SEVERE",1E3),mc=new kc("WARNING",900),nc=new kc("CONFIG",700),oc=new kc("FINE",500);V.prototype.getParent=function(){return this.T};V.prototype.Va=function(a){this.G=a};function pc(a){if(a.G)return a.G;if(a.T)return pc(a.T);ta("Root logger has no level set.");return i}
V.prototype.log=function(a,b,c){if(a.value>=pc(this).value){a=this.fb(a,b,c);b="log:"+a.ib;m.console&&(m.console.timeStamp?m.console.timeStamp(b):m.console.markTimeline&&m.console.markTimeline(b));m.msWriteProfilerMark&&m.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Ba)for(var f=0,e=h;e=c.Ba[f];f++)e(d);b=b.getParent()}}};
V.prototype.fb=function(a,b,c){var d=new U(a,String(b),this.jb);if(c){d.za=c;var f;var e=arguments.callee.caller;try{var g;var j=ba("window.location.href");if(u(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var n,r,G=!1;try{n=c.lineNumber||c.Gb||"Not available"}catch(t){n="Not available",G=!0}try{r=c.fileName||c.filename||c.sourceURL||j}catch(o){r="Not available",G=!0}g=G||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:n,fileName:r,stack:c.stack||"Not available"}:c}f="Message: "+la(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+la(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+la(fc(e)+"-> ")}catch(E){f="Exception trying to expose exception! You win, we lose. "+E}d.ya=f}return d};function W(a,b){a.log(oc,b,h)}var qc={},rc=i;
function sc(a){rc||(rc=new V(""),qc[""]=rc,rc.Va(nc));var b;if(!(b=qc[a])){b=new V(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=sc(a.substr(0,c));if(!c.ea)c.ea={};c.ea[d]=b;b.T=c;qc[a]=b}return b};function tc(a){this.headers=new Rb;this.A=a||i}x(tc,Q);tc.prototype.f=sc("goog.net.XhrIo");var uc=/^https?$/i;l=tc.prototype;l.m=!1;l.a=i;l.$=i;l.la="";l.Fa="";l.D=0;l.F="";l.fa=!1;l.P=!1;l.ka=!1;l.r=!1;l.Z=0;l.v=i;l.Ta="";l.Bb=!1;
l.send=function(a,b,c,d,f){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request");typeof f=="undefined"&&(f=!0);b=b?b.toUpperCase():"GET";this.la=a;this.F="";this.D=0;this.Fa=b;this.fa=!1;this.m=!0;this.a=this.A?cc(this.A):cc(ac);this.$=this.A?this.A.L||(this.A.L=ec(this.A)):ac.L||(ac.L=ec(ac));this.a.onreadystatechange=w(this.Na,this);try{W(this.f,X(this,"Opening Xhr")),this.ka=!0,this.a.open(b,a,!0),this.ka=!1}catch(e){W(this.f,X(this,"Error opening Xhr: "+e.message));vc(this,
e);return}var a=c||"",g=new Rb(this.headers);d&&Qb(d,function(a,b){g.set(b,a)});b=="POST"&&!Object.prototype.hasOwnProperty.call(g.o,"Content-Type")&&f&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Qb(g,function(a,b){this.a.setRequestHeader(b,a)},this);if(this.Ta)this.a.responseType=this.Ta;if("withCredentials"in this.a)this.a.withCredentials=this.Bb;try{if(this.v)Ob.clearTimeout(this.v),this.v=i;if(this.Z>0)W(this.f,X(this,"Will abort after "+this.Z+"ms if incomplete")),
this.v=Ob.setTimeout(w(this.xb,this),this.Z);W(this.f,X(this,"Sending request"));this.P=!0;this.a.send(a);this.P=!1}catch(j){W(this.f,X(this,"Send error: "+j.message)),vc(this,j)}};l.xb=function(){if(typeof aa!="undefined"&&this.a)this.F="Timed out after "+this.Z+"ms, aborting",this.D=8,W(this.f,X(this,this.F)),this.dispatchEvent("timeout"),this.abort(8)};function vc(a,b){a.m=!1;if(a.a)a.r=!0,a.a.abort(),a.r=!1;a.F=b;a.D=5;wc(a);xc(a)}
function wc(a){if(!a.fa)a.fa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error")}l.abort=function(a){if(this.a&&this.m)W(this.f,X(this,"Aborting")),this.m=!1,this.r=!0,this.a.abort(),this.r=!1,this.D=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xc(this)};l.n=function(){if(this.a){if(this.m)this.m=!1,this.r=!0,this.a.abort(),this.r=!1;xc(this,!0)}tc.Y.n.call(this)};l.Na=function(){!this.ka&&!this.P&&!this.r?this.kb():yc(this)};l.kb=function(){yc(this)};
function yc(a){if(a.m&&typeof aa!="undefined")if(a.$[1]&&zc(a)==4&&Ac(a)==2)W(a.f,X(a,"Local request error detected and ignored"));else if(a.P&&zc(a)==4)Ob.setTimeout(w(a.Na,a),0);else if(a.dispatchEvent("readystatechange"),zc(a)==4){W(a.f,X(a,"Request complete"));a.m=!1;var b=Ac(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=b===0){b=String(a.la).match(Nb)[1]||i;if(!b&&self.location)b=self.location.protocol,b=b.substr(0,b.length-1);b=
!uc.test(b?b.toLowerCase():"")}c=b}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.D=6;var d;try{d=zc(a)>2?a.a.statusText:""}catch(f){W(a.f,"Can not get status: "+f.message),d=""}a.F=d+" ["+Ac(a)+"]";wc(a)}xc(a)}}function xc(a,b){if(a.a){var c=a.a,d=a.$[0]?ca:i;a.a=i;a.$=i;if(a.v)Ob.clearTimeout(a.v),a.v=i;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){a.f.log(lc,"Problem encountered resetting onreadystatechange: "+f.message,h)}}}
function zc(a){return a.a?a.a.readyState:0}function Ac(a){try{return zc(a)>2?a.a.status:-1}catch(b){return a.f.log(mc,"Can not get status: "+b.message,h),-1}}function X(a,b){return b+" ["+a.Fa+" "+a.la+" "+Ac(a)+"]"};function Bc(a){this.e={};this.I=a;this.W={};this.Da=new tc;N(this.Da,"complete",this.lb,!1,this)}x(Bc,Q);Bc.prototype.call=function(a,b,c){console.log("ServiceMethod ["+this.I.name+"].call >");this.Da.send(Cc(this,this.I.url,this.I.requiredURLParams,a),this.I.httpMethod,a,b,c)};
Bc.prototype.lb=function(a){var b=Ac(a.target);b>399||b<200?a=new Jb("fault",a):(a=a.target,a=a.a?Tb(a.a.responseText):h,typeof a.wb!="undefined"&&a.wb==!1?(console.log(a.message),a=new Jb("fault",a)):a=new Jb("result",a));wb(this,a)};function Cc(a,b,c,d){for(var f=c.length-1;f>=0;f--){var e=c[f],g=b.split("{"+e+"}");typeof d[e]!="undefined"?b=g.join(d[e]):console.log("ERROR > Missing required URL param '"+e+"' for method '"+a.I.name+"'")}return b};var Dc,Y,Ec,Fc,Gc,Hc;function Z(a,b){this.S=new a;this.view=new b(this.S);N(this.S,"set_attribute",this.ma,!1,this)}x(Z,Q);Z.prototype.ma=k();Z.prototype.c=function(){this.view.c()};Z.prototype.i=function(){this.view.i()};function Ic(a){this.e={};this.rb=a;for(var b in a.methods){var c=a.methods[b];console.log("found method = "+c.name);typeof this[c.name]!="undefined"?console.log("WARNING > Duplicate method '"+c.name+"' for service '"+this.rb.name+"'. IGNORED!"):(console.log("adding method = "+c.name),this[c.name]=new Bc(c))}}x(Ic,Q);function Jc(a){console.log(a);this.e={};this.Ua=a;this.W={}}x(Jc,Q);function Kc(a){var b=Dc,c;if(typeof b.W[a]!="undefined")c=b.W[a];else if(typeof b.Ua[a]!="undefined")c=b.Ua[a],c.name=a,c=new Ic(c),b.W[a]=c;typeof c=="undefined"&&console.log("ERROR: Service '"+a+"' not found");return c};function Lc(){this.e={};this.qa=this.Ya.bind(this)}x(Lc,Q);Lc.prototype.Ya=function(a){for(var b=this.B.length-1;b>=0;b--)if(a==this.B[b]){this.B.splice(b,1);break}this.B.length==0&&typeof this.pa=="function"&&this.pa()};function Mc(a,b,c){a.B=[];for(var d=b.length-1;d>=0;d--)a.B.push(b[d]);a.pa=c};function Nc(a,b){Z.call(this,a,b);var c=this;this.Sa=function(){console.log("this.pushCallback > ");c.refresh()};this.k=Kc("Media");this.Ca=new Kb;this.da=new Lc}x(Nc,Z);l=Nc.prototype;
l.c=function(){this.view.c();N(this.k.listMedia,"result",this.La,!1,this);N(this.k.listMedia,"fault",this.Ka,!1,this);N(this.k.uploadMedia,"result",this.nb,!1,this);N(this.k.uploadMedia,"fault",this.mb,!1,this);var a=Y.p.get();this.k.listMedia.call({event_id:a.id});this.ua=Ec.subscribe(a.id);this.ua.bind("new_media",this.Sa);N(this.view.t,"click",this.s,!1,this);N(this.view.file,"change",this.Aa,!1,this);N(this.view.file,"DOMSubtreeModified",this.Aa,!1,this);N(this.view.sa,"click",this.ta,!1,this)};
l.Aa=function(a){var a=!1,b=this;if(window.FormData){var c=this.view.file.files;if(c&&c.length>0)if(this.Ca.isSupported()){var d=[],f=[];Mc(this.da,c,function(){for(var a=new FormData,c=d.length-1;c>=0;c--)a.append("file",d[c]);for(c=f.length-1;c>=0;c--)a.append("base64"+c,f[c]);Oc(b,a)});for(var e=c.length-1;e>=0;e--){var g=c[e];Lb(this.Ca,g,function(a){return function(c){c!=i?c.type=="blob"?d.push(c.file):c.type=="base64"&&f.push(c.file):d.push(a);b.da.qa(a)}}(g))==!1&&(d.push(g),this.da.qa(g))}}else{a=
new FormData;for(e=c.length-1;e>=0;e--)g=c[e],a.append("file",g);Oc(this,a)}}else c=Y.l.get(),a=Y.p.get(),this.view.key.value="969490e925ae635134d0977aa6e74f9e",this.view.cb.value=a.id,this.view.zb.value=c.email,this.view.yb.submit()};function Oc(a,b){var c=Y.l.get(),d=Y.p.get();b.append("key","969490e925ae635134d0977aa6e74f9e");b.append("event_id",d.id);b.append("user_email",c.email);a.k.uploadMedia.call(b,i,!1)}l.s=function(){$("events")};l.refresh=function(){this.k.listMedia.call({event_id:Y.p.get().id})};
l.nb=function(){console.log("uploadMedia result>")};l.mb=function(){console.log("uploadMedia fault>")};
l.La=function(a){console.log("ListMedia result>");console.log(a.data);for(var b=this.view.U,c;c=b.firstChild;)b.removeChild(c);for(b=0;b<a.data.length;b++){c=a.data[b];var d={};d.url="http://photos.gthrng.com/"+c._id.$id+"_thumb.jpg";d.Fb="http://photos.gthrng.com/"+c._id.$id+".jpg";d.ob=typeof c.user=="object"&&typeof c.user.name!="undefined"?c.user.name:"Unknown User";d.hb=Fc.isArray(c.likes)?c.likes.length:0;d.$a=Fc.isArray(c.comments)?c.comments.length:0;d.Ab=Ib(c.uploaded);c=d;d=new S;d.append('<li class="photoitem"><p class="owner">',
T(c.ob),'</p><p class="timestamp">',T(c.Ab),'</p><img src="',T(c.url),'" width="220" /><div class="button socialbutton likebutton">&nbsp;</div><p class="likes">',T(c.hb),'</p><div class="button socialbutton commentbutton">&nbsp;</div><p class="comments">',T(c.$a),'</p><hr class="clear"/></li>');c=d.toString();this.view.U.appendChild(gb(c))}this.view.U.appendChild(db("hr",{"class":"clear"}));a=db("div",{id:"endoftimeline"});a.innerHTML="<p>This event is happening right now. Take some pictures!</p>";
this.view.U.appendChild(a)};l.Ka=function(a){console.log("ListMedia fault>");console.log(a.data)};l.ta=function(){this.view.file.click()};l.i=function(){this.view.i();this.ua.unbind("new_media",this.Sa);O(this.view.sa,"click",this.ta,!1,this);O(this.view.t,"click",this.s,!1,this);O(this.k.listMedia,"result",this.La);O(this.k.listMedia,"fault",this.Ka)};function Pc(a){P.call(this,a);this.Kb=F("player-container")}x(Pc,P);Pc.prototype.c=function(){this.t=F("backbutton");this.eb=F("eventlist")};function Qc(a){P.call(this,a)}x(Qc,P);Qc.prototype.c=function(){this.tb=F("no_account_link");this.Ga=F("loginform");this.Eb=F("email");this.Jb=F("password")};function Rc(){if(typeof localStorage=="undefined")console.log("Your browser does not support HTML5 localStorage. Try upgrading.");else{var a=localStorage.getItem("user");return typeof a!="undefined"?Tb(a):i}};function Sc(a){for(var b=[],c=Tc,d=a.elements,f,e=0;f=d[e];e++)if(!(f.disabled||f.tagName.toLowerCase()=="fieldset")){var g=f.name;switch(f.type.toLowerCase()){case "file":case "submit":case "reset":case "button":break;case "select-multiple":f=Uc(f);if(f!=i)for(var j,n=0;j=f[n];n++)c(b,g,j);break;default:j=Uc(f),j!=i&&c(b,g,j)}}d=a.getElementsByTagName("input");for(e=0;f=d[e];e++)if(f.form==a&&f.type.toLowerCase()=="image")g=f.name,c(b,g,f.value),c(b,g+".x","0"),c(b,g+".y","0");return b.join("&")}
function Tc(a,b,c){a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function Uc(a){var b=a.type;if(b===h)return i;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:i;case "select-one":return b=a.selectedIndex,b>=0?a.options[b].value:i;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:i;default:return a.value!==h?a.value:i}};function Vc(a,b){Z.call(this,a,b);this.h=Kc("Auth")}x(Vc,Z);l=Vc.prototype;l.c=function(){this.view.c();var a=this;this.view.Ga.onsubmit=function(b){b.preventDefault();return a.X(b)};N(this.view.tb,"click",this.sb,!1,this);N(this.h.login,"result",this.Ma,!1,this);N(this.h.login,"fault",this.na,!1,this)};l.sb=function(){$("signup")};l.X=function(){this.h.login.call(Sc(this.view.Ga));return!1};
l.Ma=function(a){console.log("Login result>");console.log(a.data);if(Boolean(a.data.success)==!0){var b=a.data.result;if(typeof localStorage=="undefined")console.log("Your browser does not support HTML5 localStorage. Try upgrading.");else{localStorage.removeItem("user");try{localStorage.setItem("user",Vb(b))}catch(c){console.log("Storage quota exceeded!")}}Y.l.set(a.data.result);$("events")}else this.na(a)};
l.na=function(a){console.log("Login fault>");a=a.data.message;typeof navigator.notification!="undefined"&&typeof navigator.notification.alert!="undefined"?navigator.notification.alert(a,i,"Notification"):alert(a)};l.i=function(){this.view.i();O(this.h.login,"result",this.Ma);O(this.h.login,"fault",this.na)};function Wc(){this.e={}}x(Wc,R);function Xc(a,b){Z.call(this,a,b);this.h=Kc("Auth")}x(Xc,Z);l=Xc.prototype;l.c=function(){this.view.c();var a=this;this.view.Wa.onsubmit=function(b){b.preventDefault();return a.X(b)};var b=Yc("ic");if(typeof b=="string"&&b!="")b=b.toLowerCase(),this.view.gb.value=b;N(this.h.signup,"result",this.Pa,!1,this);N(this.h.signup,"fault",this.Oa,!1,this);N(this.view.ub,"click",this.vb,!1,this);N(this.view.t,"click",this.s,!1,this)};l.s=function(){$("login")};l.vb=function(){this.X()};
l.X=function(){this.h.signup.call(Sc(this.view.Wa));return!1};l.Pa=function(a){console.log("Signup result>");console.log(a.data);Y.l.set(a.data.result);$("events")};l.Oa=function(a){console.log("Signup fault>");console.log(a.data)};l.i=function(){this.view.i();O(this.h.signup,"result",this.Pa);O(this.h.signup,"fault",this.Oa)};var Zc={N:function(a,b){var c=b||new S;c.append('<div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Log in</p></div></div></div><p id="pagetitle">Create your Gathering account</p></div> <\!-- Header ends --\><form id="accountform" class="maincontent"><p class="wp7">Gathering Invitation Code</p><input class="textfield" id="invitation_code" name="invitation_code" type="text" placeholder="Gathering Invitation Code"><p class="infotext">Enter the code that was included in your invitation (if you received one).</p><p class="wp7">Full name</p><input class="textfield" id="name" name="name" type="text" placeholder="Full name"><p class="infotext">Fellow event guests will identify you by this name.</p><p class="wp7">email@address.com</p><input class="textfield" id="email" name="email" type="email" placeholder="email@address.com"><p class="wp7">Password</p><input class="textfield" id="password" name="password" type="password" placeholder="Password"><br/><p class="wp7">Password (again)</p><input class="textfield" id="password" name="retypepassword" type="password" placeholder="Password (again)"><br/><input class="checkbox" id="tos" name="tos" type="checkbox"><label for="tos">I have read and agree to the <a href="tos.html">Gathering Terms of Service</a>.</label><hr class="clear" /><div id="donebuttonwrapper"><div class="button bigbutton" id="donebutton"></div><p class="buttonlabel">Submit</p></div></form><hr class="clear" />');
if(!b)return c.toString()}};function $c(){this.e={};for(var a=[],b,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)b=c[d].split("="),a[b[0]]=b[1];this.aa=a}x($c,Q);function Yc(a){var b=Gc;return b.aa&&b.aa.hasOwnProperty(a)?b.aa[a]:i};function ad(a,b){Z.call(this,a,b);this.C=Kc("Events")}x(ad,Z);l=ad.prototype;l.c=function(){this.view.c();N(this.C.listEventsUsersIsInvited,"result",this.Ja,!1,this);N(this.C.listEventsUsersIsInvited,"fault",this.Ia,!1,this);this.C.listEventsUsersIsInvited.call({email:Y.l.get().email});N(this.view.t,"click",this.s,!1,this)};
l.xa=function(a){a:{var a=a.target,b=0;do{for(var c=0;c<this.q.length;c++)if(this.q[c].element==a){a=this.q[c].event;break a}a=a.parentNode;b++}while(a&&a!=document.body&&b<20);a=i}Y.p.set(a);$("media")};l.s=function(){typeof localStorage=="undefined"?console.log("Your browser does not support HTML5 localStorage. Try upgrading."):localStorage.removeItem("user");$("login")};
l.Ja=function(a){console.log("ListEvents result>");console.log(a.data);bd(this);var b=Y.Qa.get();console.log("prevState = "+b);if(a.data.length==1&&b!="media"){var a=a.data[0],c=Ib(a.start_date),d=Hb(a.start_time),f="";c!=""&&d!=""&&(f=" at ");c=c+f+d;Y.p.set(a);$("media")}else for(b=0;b<a.data.length;b++){var e=a.data[b],g={};g.name=e.name;c=Ib(e.start_date);d=Hb(e.start_time);f="";c!=""&&d!=""&&(f=" at ");c=c+f+d;g.bb=c;g.id=e.id;c=g;d=new S;d.append('<li class="eventitem clearfix now"><div class="eventiteminfo"><h2>',
T(c.name),"</h2><p>",T(c.bb),'</p></div><div class="eventitembadge now"><p>Now</p></div></li>');c=d.toString();d=document.createElement("div");N(d,"click",this.xa,!1,this);d.innerHTML=c;hb(d);this.q.push({element:d,event:g});this.view.eb.appendChild(d)}};l.Ia=function(a){console.log("ListEvents fault>");console.log(a.data)};function bd(a){if(typeof a.q!="undefined")for(var b=0;b<a.q.length;b++)O(a.q[b].element,"click",a.xa);a.q=[]}
l.i=function(){this.view.i();bd(this);O(this.view.t,"click",this.s,!1,this);O(this.C.listEventsUsersIsInvited,"result",this.Ja);O(this.C.listEventsUsersIsInvited,"fault",this.Ia)};var cd={N:function(a,b){var c=b||new S;c.append('<div id="noscroll"><div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Events</p></div></div></div><p id="pagetitle">',T(a.event.name),'</p></div> <\!-- Header ends --\><div id="sidebar"><\!-- form action="http://api.gthrng.com/gathering/uploadFullResFile " method="post" enctype="multipart/form-data" id="upload_form" --\><form action="http://api.gthrng.com/gathering/uploadMediaFile " method="post" enctype="multipart/form-data" id="upload_form"><input type="file" name="file" id="file"><input type="hidden" name="event_id" id="event_id"><input type="hidden" name="user_email" id="user_email"><input type="hidden" name="key" id="key"></form><div id="camerabuttonwrapper"><p class="buttonlabel">Camera</p><div class="button bigbutton" id="camerabutton">&nbsp;</div></div></div></div><div id="wrapper"><div id="scroller"><ul id="photolist" class="maincontent"></ul></div></div>');
if(!b)return c.toString()}};function dd(a){P.call(this,a)}x(dd,P);dd.prototype.c=function(){this.file=F("file");this.cb=F("event_id");this.zb=F("user_email");this.key=F("key");this.yb=F("upload_form");this.t=F("backbutton");this.U=F("photolist");this.sa=F("camerabuttonwrapper")};function ed(){this.e={}}x(ed,R);function fd(){this.e={}}x(fd,Q);fd.prototype.isArray=function(a){return a&&(a instanceof Array||typeof a=="array")};function gd(){this.e={};var a=this;this.state=Ab(this,"state","login",function(b){a.Qa.set(a.state.get());return b});this.l=Ab(this,"user",{},i);this.p=Ab(this,"currentEvent",{},i);this.Qa=Ab(this,"prevState",i,i)}x(gd,R);var hd={N:function(a,b){var c=b||new S;c.append('<div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Log out</p></div></div></div><p id="pagetitle">All events for ',T(a.l.name),'</p></div> <\!-- Header ends --\><ul id="eventlist" class="maincontent"></ul>');if(!b)return c.toString()}};function jd(){this.e={}}x(jd,R);function $(a){Y.state.set(a)}
function kd(a){var d;if(a.Za=="state"){console.log("state has changed!");var b;b=document;var c=i;(d=(c=$a(b)?b.querySelector(".state_container"):Za()[0])||i,b=d)&&b&&b.parentNode&&b.parentNode.removeChild(b);typeof xb!="undefined"&&(xb.i(),window.cleanScrolling());b=Hc[a.K].template;c={l:Y.l.get(),event:Y.p.get()};b=b.N(c);c={"class":"container state_container"};if(a.K=="login")c.id="login";c=db("div",c);c.innerHTML=b;hb(c);document.body.appendChild(c);a.K=="login"?window.scrollLoginScreen():window.scrollOtherScreens();
xb=Hc[a.K].component;xb.c()}}
window.gthrng_main=function(a){if(!Function.prototype.bind)Function.prototype.bind=function(a){function b(){return n.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),n=this;c.prototype=this.prototype;b.prototype=new c;return b};Y=new gd;Ec=a.pusher;Dc=new Jc(a.services);Gc=new $c;Fc=new fd;
N(Y,"set_attribute",kd);var a=new Vc(Bb,Qc),b=new Xc(ed,zb),c=new ad(jd,Pc),d=new Nc(Wc,dd);Hc={login:{template:Gb,component:a},signup:{template:Zc,component:b},events:{template:hd,component:c},media:{template:cd,component:d}};b=Yc("ic");a=Yc("p");typeof b=="string"&&b!=""&&(a="signup");b=Rc();typeof b=="object"&&b!=i?(Y.l.set(b),console.log("set currentState to events"),$("events")):typeof a=="string"&&a!=""&&Hc.hasOwnProperty(a.toLowerCase())?(console.log("set currentState from url param"),$(a)):
(console.log("set currentState to login"),$("login"))};window.gthrng_setCurrentState=$;
