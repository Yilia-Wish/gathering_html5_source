var h=void 0,i=null;function k(){return function(){}}var l,aa=aa||{},n=this;function ba(a){for(var a=a.split("."),b=n,c;c=a.shift();)if(b[c]!=i)b=b[c];else return i;return b}function ca(){}
function o(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function s(a){return o(a)=="array"}function t(a){var b=o(a);return b=="array"||b=="object"&&typeof a.length=="number"}function u(a){return typeof a=="string"}function da(a){var b=typeof a;return b=="object"&&a!=i||b=="function"}function v(a){return a[ea]||(a[ea]=++fa)}var ea="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),fa=0;function ga(a,b,c){return a.call.apply(a.bind,arguments)}
function ha(a,b,c){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}function w(a,b,c){w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ga:ha;return w.apply(i,arguments)}var ia=Date.now||function(){return+new Date};
function x(a,b){function c(){}c.prototype=b.prototype;a.W=b.prototype;a.prototype=new c};function ja(a){this.stack=Error().stack||"";if(a)this.message=String(a)}x(ja,Error);ja.prototype.name="CustomError";function ka(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function la(a){if(!ma.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(na,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(oa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(pa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(qa,"&quot;"));return a}var na=/&/g,oa=/</g,pa=/>/g,qa=/\"/g,ma=/[&<>\"]/;function ra(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function sa(a,b){b.unshift(a);ja.call(this,ka.apply(i,b));b.shift();this.tb=a}x(sa,ja);sa.prototype.name="AssertionError";function ta(a,b){throw new sa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var y=Array.prototype,ua=y.indexOf?function(a,b,c){return y.indexOf.call(a,b,c)}:function(a,b,c){c=c==i?0:c<0?Math.max(0,a.length+c):c;if(u(a))return!u(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=y.forEach?function(a,b,c){y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=u(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)};function wa(a){return y.concat.apply(y,arguments)}
function xa(a){if(s(a))return wa(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function ya(a,b,c){return arguments.length<=2?y.slice.call(a,b):y.slice.call(a,b,c)};function za(a,b){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var d=ya(arguments,1),f;f=c;for(var e=0,g=0;g<d.length;g++)ua(f,d[g])>=0||(f.push(d[g]),e++);f=e==d.length;a.className=c.join(" ");return f};function Aa(a,b){for(var c in a)b.call(h,a[c],c,a)}function Ba(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ca(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Da="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Ea(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Da.length;e++)c=Da[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var z,Fa,Ga,Ha;function Ia(){return n.navigator?n.navigator.userAgent:i}Ha=Ga=Fa=z=!1;var Ja;if(Ja=Ia()){var Ka=n.navigator;z=Ja.indexOf("Opera")==0;Fa=!z&&Ja.indexOf("MSIE")!=-1;Ga=!z&&Ja.indexOf("WebKit")!=-1;Ha=!z&&!Ga&&Ka.product=="Gecko"}var La=z,A=Fa,B=Ha,D=Ga,Ma=n.navigator,Na=(Ma&&Ma.platform||"").indexOf("Mac")!=-1,Oa;
a:{var Pa="",Qa;if(La&&n.opera)var Ra=n.opera.version,Pa=typeof Ra=="function"?Ra():Ra;else if(B?Qa=/rv\:([^\);]+)(\)|;)/:A?Qa=/MSIE\s+([^\);]+)(\)|;)/:D&&(Qa=/WebKit\/(\S+)/),Qa)var Sa=Qa.exec(Ia()),Pa=Sa?Sa[1]:"";if(A){var Ta,Ua=n.document;Ta=Ua?Ua.documentMode:h;if(Ta>parseFloat(Pa)){Oa=String(Ta);break a}}Oa=Pa}var Va={};
function E(a){var b;if(!(b=Va[a])){b=0;for(var c=String(Oa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;b==0&&e<f;e++){var g=c[e]||"",j=d[e]||"",p=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var F=p.exec(g)||["","",""],r=q.exec(j)||["","",""];if(F[0].length==0&&r[0].length==0)break;b=ra(F[1].length==0?0:parseInt(F[1],10),r[1].length==0?0:parseInt(r[1],10))||ra(F[2].length==0,r[2].length==
0)||ra(F[2],r[2])}while(b==0)}b=Va[a]=b>=0}return b}var Wa={};function Xa(){return Wa[9]||(Wa[9]=A&&!!document.documentMode&&document.documentMode>=9)};var Ya=!A||Xa();!B&&!A||A&&Xa()||B&&E("1.9.1");A&&E("9");function G(a){return u(a)?document.getElementById(a):a}function Za(){var a=document;if($a(a))return a.querySelectorAll(".state_container");else if(a.getElementsByClassName)return a.getElementsByClassName("state_container");return ab()}function $a(a){return a.querySelectorAll&&a.querySelector&&(!D||document.compatMode=="CSS1Compat"||E("528"))}
function ab(){var a,b,c,d;a=document;if($a(a))return a.querySelectorAll(".state_container");if(a.getElementsByClassName){var f=a.getElementsByClassName("state_container");return f}f=a.getElementsByTagName("*");d={};for(b=c=0;a=f[b];b++){var e=a.className;typeof e.split=="function"&&ua(e.split(/\s+/),"state_container")>=0&&(d[c++]=a)}d.length=c;return d}
function bb(a,b){Aa(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in cb?a.setAttribute(cb[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var cb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function db(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!Ya&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',la(g.name),'"');if(g.type){e.push(' type="',la(g.type),'"');var j={};Ea(j,g);g=j;delete g.type}e.push(">");e=e.join("")}e=f.createElement(e);if(g)u(g)?e.className=g:s(g)?za.apply(i,[e].concat(g)):bb(e,g);d.length>2&&eb(f,e,d);return e}
function eb(a,b,c){function d(c){c&&b.appendChild(u(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];t(e)&&!(da(e)&&e.nodeType>0)?va(fb(e)?xa(e):e,d):d(e)}}function gb(a){var b,c=a.parentNode;if(c&&c.nodeType!=11)if(a.removeNode)a.removeNode(!1);else{for(;b=a.firstChild;)c.insertBefore(b,a);a&&a.parentNode&&a.parentNode.removeChild(a)}}
function fb(a){if(a&&typeof a.length=="number")if(da(a))return typeof a.item=="function"||typeof a.item=="string";else if(o(a)=="function")return typeof a.item=="function";return!1};function hb(){}var ib=0;l=hb.prototype;l.key=0;l.v=!1;l.ka=!1;l.O=function(a,b,c,d,f,e){if(o(a)=="function")this.va=!0;else if(a&&a.handleEvent&&o(a.handleEvent)=="function")this.va=!1;else throw Error("Invalid listener argument");this.F=a;this.Ia=b;this.src=c;this.type=d;this.capture=!!f;this.da=e;this.ka=!1;this.key=++ib;this.v=!1};l.handleEvent=function(a){return this.va?this.F.call(this.da||this.src,a):this.F.handleEvent.call(this.F,a)};!A||Xa();var jb=!A||Xa(),kb=A&&!E("8");!D||E("528");B&&E("1.9b")||A&&E("8")||La&&E("9.5")||D&&E("528");!B||E("8");function lb(){}lb.prototype.pa=!1;lb.prototype.K=function(){if(!this.pa)this.pa=!0,this.l()};lb.prototype.l=function(){this.Sa&&mb.apply(i,this.Sa)};function mb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];t(d)?mb.apply(i,d):d&&typeof d.K=="function"&&d.K()}};function H(a,b){this.type=a;this.currentTarget=this.target=b}x(H,lb);H.prototype.l=function(){delete this.type;delete this.target;delete this.currentTarget};H.prototype.u=!1;H.prototype.H=!0;H.prototype.preventDefault=function(){this.H=!1};function nb(a){nb[" "](a);return a}nb[" "]=ca;function I(a,b){a&&this.O(a,b)}x(I,H);l=I.prototype;l.target=i;l.relatedTarget=i;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.ab=!1;l.ba=i;
l.O=function(a,b){var c=this.type=a.type;H.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(B){var f;a:{try{nb(d.nodeName);f=!0;break a}catch(e){}f=!1}f||(d=i)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=D||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=D||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ab=Na?a.metaKey:a.ctrlKey;this.state=a.state;this.ba=a;delete this.H;delete this.u};
l.preventDefault=function(){I.W.preventDefault.call(this);var a=this.ba;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,kb)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};l.l=function(){I.W.l.call(this);this.relatedTarget=this.currentTarget=this.target=this.ba=i};var J={},K={},L={},M={};
function N(a,b,c,d,f){if(b)if(s(b))for(var e=0;e<b.length;e++)N(a,b[e],c,d,f);else{var d=!!d,g=K;b in g||(g[b]={b:0,f:0});g=g[b];d in g||(g[d]={b:0,f:0},g.b++);var g=g[d],j=v(a),p;g.f++;if(g[j]){p=g[j];for(e=0;e<p.length;e++)if(g=p[e],g.F==c&&g.da==f){if(g.v)break;return}}else p=g[j]=[],g.b++;e=ob();e.src=a;g=new hb;g.O(c,e,a,b,d,f);c=g.key;e.key=c;p.push(g);J[c]=g;L[j]||(L[j]=[]);L[j].push(g);a.addEventListener?(a==n||!a.oa)&&a.addEventListener(b,e,d):a.attachEvent(b in M?M[b]:M[b]="on"+b,e)}else throw Error("Invalid event type");
}function ob(){var a=pb,b=jb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function O(a,b,c,d,f){if(s(b))for(var e=0;e<b.length;e++)O(a,b[e],c,d,f);else{d=!!d;a:{e=K;if(b in e&&(e=e[b],d in e&&(e=e[d],a=v(a),e[a]))){a=e[a];break a}a=i}if(a)for(e=0;e<a.length;e++)if(a[e].F==c&&a[e].capture==d&&a[e].da==f){qb(a[e].key);break}}}
function qb(a){if(J[a]){var b=J[a];if(!b.v){var c=b.src,d=b.type,f=b.Ia,e=b.capture;c.removeEventListener?(c==n||!c.oa)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in M?M[d]:M[d]="on"+d,f);c=v(c);f=K[d][e][c];if(L[c]){var g=L[c],j=ua(g,b);j>=0&&y.splice.call(g,j,1);g.length==0&&delete L[c]}b.v=!0;f.ya=!0;rb(d,e,c,f);delete J[a]}}}
function rb(a,b,c,d){if(!d.P&&d.ya){for(var f=0,e=0;f<d.length;f++)d[f].v?d[f].Ia.src=i:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.ya=!1;e==0&&(delete K[a][b][c],K[a][b].b--,K[a][b].b==0&&(delete K[a][b],K[a].b--),K[a].b==0&&delete K[a])}}function sb(a){var b,c=0,d=b==i;b=!!b;if(a==i)Aa(L,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)qb(f.key),c++}});else if(a=v(a),L[a])for(var a=L[a],f=a.length-1;f>=0;f--){var e=a[f];if(d||b==e.capture)qb(e.key),c++}}
function tb(a,b,c,d,f){var e=1,b=v(b);if(a[b]){a.f--;a=a[b];a.P?a.P++:a.P=1;try{for(var g=a.length,j=0;j<g;j++){var p=a[j];p&&!p.v&&(e&=ub(p,f)!==!1)}}finally{a.P--,rb(c,d,b,a)}}return Boolean(e)}function ub(a,b){var c=a.handleEvent(b);a.ka&&qb(a.key);return c}
function vb(a,b){var c=b.type||b,d=K;if(!(c in d))return!0;if(u(b))b=new H(b,a);else if(b instanceof H)b.target=b.target||a;else{var f=b,b=new H(c,a);Ea(b,f)}var f=1,e,d=d[c],c=!0 in d,g;if(c){e=[];for(g=a;g;g=g.ja)e.push(g);g=d[!0];g.f=g.b;for(var j=e.length-1;!b.u&&j>=0&&g.f;j--)b.currentTarget=e[j],f&=tb(g,e[j],b.type,!0,b)&&b.H!=!1}if(!1 in d)if(g=d[!1],g.f=g.b,c)for(j=0;!b.u&&j<e.length&&g.f;j++)b.currentTarget=e[j],f&=tb(g,e[j],b.type,!1,b)&&b.H!=!1;else for(d=a;!b.u&&d&&g.f;d=d.ja)b.currentTarget=
d,f&=tb(g,d,b.type,!1,b)&&b.H!=!1;return Boolean(f)}
function pb(a,b){if(!J[a])return!0;var c=J[a],d=c.type,f=K;if(!(d in f))return!0;var f=f[d],e,g;if(!jb){e=b||ba("window.event");var j=!0 in f,p=!1 in f;if(j){if(e.keyCode<0||e.returnValue!=h)return!0;a:{var q=!1;if(e.keyCode==0)try{e.keyCode=-1;break a}catch(F){q=!0}if(q||e.returnValue==h)e.returnValue=!0}}q=new I;q.O(e,this);e=!0;try{if(j){for(var r=[],m=q.currentTarget;m;m=m.parentNode)r.push(m);g=f[!0];g.f=g.b;for(var C=r.length-1;!q.u&&C>=0&&g.f;C--)q.currentTarget=r[C],e&=tb(g,r[C],d,!0,q);if(p){g=
f[!1];g.f=g.b;for(C=0;!q.u&&C<r.length&&g.f;C++)q.currentTarget=r[C],e&=tb(g,r[C],d,!1,q)}}else e=ub(c,q)}finally{if(r)r.length=0;q.K()}return e}d=new I(b,this);try{e=ub(c,d)}finally{d.K()}return e};var wb;function xb(a,b,c){this.Pa=b;this.I=c;H.call(this,a)}x(xb,H);function P(a){this.Q=a;N(this.Q,"set_attribute",this.ha,!1,this)}P.prototype.ha=k();P.prototype.c=k();P.prototype.h=k();function yb(a){P.call(this,a)}x(yb,P);yb.prototype.c=function(){this.r=G("backbutton");this.gb=G("donebutton");this.Na=G("accountform")};(function(a){var b={},c=a.Object,d=c.defineProperty,f=b.hasOwnProperty,e=c.preventExtensions||c.freeze||c.seal||k();b.value=1;try{if(!d||!d(b,"_",b).mb)throw"set";return function(a){var b={},c,g;for(g in a)if(f.call(a,g))c=a[g],c.enumerable=1,c.configurable=0,d(b,g,c);e(b);return b}}catch(g){return"__defineGetter__"in b?function(a){var b={},c,d;for(d in a)if(f.call(a,d))c=a[d],f.call(c,"value")?f.call(c,"writable")&&c.writable?b[d]=c.value:(b.__defineGetter__(d,function(a){return function(){return a}}(c.value)),
b.__defineSetter__(d,function(){throw"read-only";})):(f.call(c,"get")&&b.__defineGetter__(d,c.get),f.call(c,"set")&&b.__defineSetter__(d,c.set));e(b);return b}:(id=0,a.execScript("Function execVBScript(code)\nExecuteGlobal(code)\nEnd Function","VBScript"),function(b){var c="StaticObject"+id++,d=["Class "+c,"Private o"],e={},g,m;for(m in b)if(f.call(b,m))if(g=b[m],f.call(g,"value"))e[m]=g.value,d.push("Public Property Get "+m,m+"=o."+m,"End Property"),f.call(g,"writable")&&g.writable&&d.push("Public Property Let "+
m+"(value)","o."+m+"=value","End Property");else{if(f.call(g,"get"))e[m]=g.get,d.push("Public Property Get "+m,m+"=o."+m+"()","End Property");if(f.call(g,"set"))e[m]=g.set,d.push("Public Property Let "+m+"(value)","o."+m+"(value)","End Property")}d.push("Private Sub Class_Initialize()","Set o="+c+"JS()","End Sub","End Class","Function "+c+"Factory()","Dim o","Set o=New "+c,"Set "+c+"Factory=o","End Function");a[c+"JS"]=function(){a[c+"JS"]=i;return e};execVBScript(d.join("\n"));return a[c+"Factory"]()})}})(this);function Q(){}x(Q,lb);l=Q.prototype;l.oa=!0;l.ja=i;l.addEventListener=function(a,b,c,d){N(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){O(this,a,b,c,d)};l.dispatchEvent=function(a){return vb(this,a)};l.l=function(){Q.W.l.call(this);sb(this);this.ja=i};function R(){this.j={}}x(R,Q);function zb(a,b,c,d){var f={};a[b+"_"]=c==h?i:c;f.get=function(){var c="";return c=a[b+"_"]};f.set=function(c){d!="readonly"&&(a[b+"_"]=d!=h&&d!=i?d(c):c);c=f.get();if(a.j[b]!=c){var g=new xb("set_attribute",b,c);vb(a,g);a.j[b]=c}};return a[b]=f};function Ab(){this.j={}}x(Ab,R);var Bb;(Bb="ScriptEngine"in n&&n.ScriptEngine()=="JScript")&&(n.ScriptEngineMajorVersion(),n.ScriptEngineMinorVersion(),n.ScriptEngineBuildVersion());function S(a,b){this.i=Bb?[]:"";a!=i&&this.append.apply(this,arguments)}S.prototype.set=function(a){this.clear();this.append(a)};Bb?(S.prototype.Z=0,S.prototype.append=function(a,b,c){b==i?this.i[this.Z++]=a:(this.i.push.apply(this.i,arguments),this.Z=this.i.length);return this}):S.prototype.append=function(a,b,c){this.i+=a;if(b!=i)for(var d=1;d<arguments.length;d++)this.i+=arguments[d];return this};S.prototype.clear=function(){Bb?this.Z=this.i.length=0:this.i=""};
S.prototype.toString=function(){if(Bb){var a=this.i.join("");this.clear();a&&this.append(a);return a}else return this.i};A&&E(8);function T(a){return typeof a==="object"&&a&&a.nb===0?a.content:String(a).replace(Cb,Db)}var Eb={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\u000b":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Db(a){return Eb[a]}var Cb=/[\x00\x22\x26\x27\x3c\x3e]/g;var Fb={L:function(a,b){var c=b||new S;c.append('<form id="loginform"><p class="wp7">Email Address</p><input class="textfield" id="email" name="email" type="email" placeholder="Email Address"/><p class="wp7">Password</p><input class="textfield" id="password" name="password" type="password" placeholder="Password"/><input class="visuallyhidden" type="submit"/><p><div id="no_account_link">I don\'t have an account yet.</div></p></form>');if(!b)return c.toString()}};function Gb(a,b){this.data=b;H.call(this,a)}x(Gb,H);var Hb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");var Ib=n.window;function Jb(a){if(typeof a.M=="function")return a.M();if(u(a))return a.split("");if(t(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ba(a)}function Kb(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(t(a)||u(a))va(a,b,c);else{var d;if(typeof a.ca=="function")d=a.ca();else if(typeof a.M!="function")if(t(a)||u(a)){d=[];for(var f=a.length,e=0;e<f;e++)d.push(e)}else d=Ca(a);else d=h;for(var f=Jb(a),e=f.length,g=0;g<e;g++)b.call(c,f[g],d&&d[g],a)}};function Lb(a,b){this.m={};this.d=[];var c=arguments.length;if(c>1){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Lb?(c=a.ca(),d=a.M()):(c=Ca(a),d=Ba(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}l=Lb.prototype;l.b=0;l.Oa=0;l.M=function(){Mb(this);for(var a=[],b=0;b<this.d.length;b++)a.push(this.m[this.d[b]]);return a};l.ca=function(){Mb(this);return this.d.concat()};
l.clear=function(){this.m={};this.Oa=this.b=this.d.length=0};function Mb(a){if(a.b!=a.d.length){for(var b=0,c=0;b<a.d.length;){var d=a.d[b];Object.prototype.hasOwnProperty.call(a.m,d)&&(a.d[c++]=d);b++}a.d.length=c}if(a.b!=a.d.length){for(var f={},c=b=0;b<a.d.length;)d=a.d[b],Object.prototype.hasOwnProperty.call(f,d)||(a.d[c++]=d,f[d]=1),b++;a.d.length=c}}l.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.m,a)?this.m[a]:b};
l.set=function(a,b){Object.prototype.hasOwnProperty.call(this.m,a)||(this.b++,this.d.push(a),this.Oa++);this.m[a]=b};function Nb(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Ob(){this.T=h}function Pb(a){var b=[];Qb(new Ob,a,b);return b.join("")}
function Qb(a,b,c){switch(typeof b){case "string":Rb(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==i){c.push("null");break}if(s(b)){var d=b.length;c.push("[");for(var f="",e=0;e<d;e++)c.push(f),f=b[e],Qb(a,a.T?a.T.call(b,String(e),f):f,c),f=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],typeof f!="function"&&(c.push(d),Rb(e,c),c.push(":"),
Qb(a,a.T?a.T.call(b,e,f):f,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var Sb={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},Tb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Rb(a,b){b.push('"',a.replace(Tb,function(a){if(a in Sb)return Sb[a];var b=a.charCodeAt(0),f="\\u";b<16?f+="000":b<256?f+="00":b<4096&&(f+="0");return Sb[a]=f+b.toString(16)}),'"')};function Ub(){}Ub.prototype.J=i;var Vb;function Wb(){}x(Wb,Ub);function Xb(a){return(a=Yb(a))?new ActiveXObject(a):new XMLHttpRequest}function Zb(a){var b={};Yb(a)&&(b[0]=!0,b[1]=!0);return b}Wb.prototype.ea=i;
function Yb(a){if(!a.ea&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.ea=d}catch(f){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.ea}Vb=new Wb;function $b(a){return ac(a||arguments.callee.caller,[])}
function ac(a,b){var c=[];if(ua(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(bc(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){f>0&&c.push(", ");var e;e=d[f];switch(typeof e){case "object":e=e?"object":"null";break;case "string":break;case "number":e=String(e);break;case "boolean":e=e?"true":"false";break;case "function":e=(e=bc(e))?e:"[fn]";break;default:e=typeof e}e.length>40&&(e=e.substr(0,40)+"...");c.push(e)}b.push(a);c.push(")\n");try{c.push(ac(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function bc(a){if(cc[a])return cc[a];a=String(a);if(!cc[a]){var b=/function ([^\(]+)/.exec(a);cc[a]=b?b[1]:"[Anonymous]"}return cc[a]}var cc={};function U(a,b,c,d,f){this.reset(a,b,c,d,f)}U.prototype.bb=0;U.prototype.sa=i;U.prototype.ra=i;var dc=0;U.prototype.reset=function(a,b,c,d,f){this.bb=typeof f=="number"?f:dc++;this.xb=d||ia();this.D=a;this.Wa=b;this.sb=c;delete this.sa;delete this.ra};U.prototype.Ma=function(a){this.D=a};function V(a){this.Xa=a}V.prototype.R=i;V.prototype.D=i;V.prototype.$=i;V.prototype.ta=i;function ec(a,b){this.name=a;this.value=b}ec.prototype.toString=function(){return this.name};var fc=new ec("SEVERE",1E3),gc=new ec("WARNING",900),hc=new ec("CONFIG",700),ic=new ec("FINE",500);V.prototype.getParent=function(){return this.R};V.prototype.Ma=function(a){this.D=a};function jc(a){if(a.D)return a.D;if(a.R)return jc(a.R);ta("Root logger has no level set.");return i}
V.prototype.log=function(a,b,c){if(a.value>=jc(this).value){a=this.Va(a,b,c);b="log:"+a.Wa;n.console&&(n.console.timeStamp?n.console.timeStamp(b):n.console.markTimeline&&n.console.markTimeline(b));n.msWriteProfilerMark&&n.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.ta)for(var f=0,e=h;e=c.ta[f];f++)e(d);b=b.getParent()}}};
V.prototype.Va=function(a,b,c){var d=new U(a,String(b),this.Xa);if(c){d.sa=c;var f;var e=arguments.callee.caller;try{var g;var j=ba("window.location.href");if(u(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var p,q,F=!1;try{p=c.lineNumber||c.rb||"Not available"}catch(r){p="Not available",F=!0}try{q=c.fileName||c.filename||c.sourceURL||j}catch(m){q="Not available",F=!0}g=F||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:p,fileName:q,stack:c.stack||"Not available"}:c}f="Message: "+la(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+la(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+la($b(e)+"-> ")}catch(C){f="Exception trying to expose exception! You win, we lose. "+C}d.ra=f}return d};function W(a,b){a.log(ic,b,h)}var kc={},lc=i;
function mc(a){lc||(lc=new V(""),kc[""]=lc,lc.Ma(hc));var b;if(!(b=kc[a])){b=new V(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=mc(a.substr(0,c));if(!c.$)c.$={};c.$[d]=b;b.R=c;kc[a]=b}return b};function nc(a){this.headers=new Lb;this.w=a||i}x(nc,Q);nc.prototype.e=mc("goog.net.XhrIo");var oc=/^https?$/i;l=nc.prototype;l.k=!1;l.a=i;l.Y=i;l.ga="";l.wa="";l.B=0;l.C="";l.aa=!1;l.N=!1;l.fa=!1;l.p=!1;l.X=0;l.s=i;l.Ka="";l.lb=!1;
l.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request");b=b?b.toUpperCase():"GET";this.ga=a;this.C="";this.B=0;this.wa=b;this.aa=!1;this.k=!0;this.a=this.w?Xb(this.w):Xb(Vb);this.Y=this.w?this.w.J||(this.w.J=Zb(this.w)):Vb.J||(Vb.J=Zb(Vb));this.a.onreadystatechange=w(this.Ea,this);try{W(this.e,X(this,"Opening Xhr")),this.fa=!0,this.a.open(b,a,!0),this.fa=!1}catch(f){W(this.e,X(this,"Error opening Xhr: "+f.message));pc(this,f);return}var a=c||"",e=new Lb(this.headers);
d&&Kb(d,function(a,b){e.set(b,a)});b=="POST"&&!Object.prototype.hasOwnProperty.call(e.m,"Content-Type")&&e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Kb(e,function(a,b){this.a.setRequestHeader(b,a)},this);if(this.Ka)this.a.responseType=this.Ka;if("withCredentials"in this.a)this.a.withCredentials=this.lb;try{if(this.s)Ib.clearTimeout(this.s),this.s=i;if(this.X>0)W(this.e,X(this,"Will abort after "+this.X+"ms if incomplete")),this.s=Ib.setTimeout(w(this.jb,this),this.X);W(this.e,
X(this,"Sending request"));this.N=!0;this.a.send(a);this.N=!1}catch(g){W(this.e,X(this,"Send error: "+g.message)),pc(this,g)}};l.jb=function(){if(typeof aa!="undefined"&&this.a)this.C="Timed out after "+this.X+"ms, aborting",this.B=8,W(this.e,X(this,this.C)),this.dispatchEvent("timeout"),this.abort(8)};function pc(a,b){a.k=!1;if(a.a)a.p=!0,a.a.abort(),a.p=!1;a.C=b;a.B=5;qc(a);rc(a)}function qc(a){if(!a.aa)a.aa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error")}
l.abort=function(a){if(this.a&&this.k)W(this.e,X(this,"Aborting")),this.k=!1,this.p=!0,this.a.abort(),this.p=!1,this.B=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),rc(this)};l.l=function(){if(this.a){if(this.k)this.k=!1,this.p=!0,this.a.abort(),this.p=!1;rc(this,!0)}nc.W.l.call(this)};l.Ea=function(){!this.fa&&!this.N&&!this.p?this.Ya():sc(this)};l.Ya=function(){sc(this)};
function sc(a){if(a.k&&typeof aa!="undefined")if(a.Y[1]&&tc(a)==4&&uc(a)==2)W(a.e,X(a,"Local request error detected and ignored"));else if(a.N&&tc(a)==4)Ib.setTimeout(w(a.Ea,a),0);else if(a.dispatchEvent("readystatechange"),tc(a)==4){W(a.e,X(a,"Request complete"));a.k=!1;var b=uc(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=b===0){b=String(a.ga).match(Hb)[1]||i;if(!b&&self.location)b=self.location.protocol,b=b.substr(0,b.length-1);b=
!oc.test(b?b.toLowerCase():"")}c=b}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.B=6;var d;try{d=tc(a)>2?a.a.statusText:""}catch(f){W(a.e,"Can not get status: "+f.message),d=""}a.C=d+" ["+uc(a)+"]";qc(a)}rc(a)}}function rc(a,b){if(a.a){var c=a.a,d=a.Y[0]?ca:i;a.a=i;a.Y=i;if(a.s)Ib.clearTimeout(a.s),a.s=i;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){a.e.log(fc,"Problem encountered resetting onreadystatechange: "+f.message,h)}}}
function tc(a){return a.a?a.a.readyState:0}function uc(a){try{return tc(a)>2?a.a.status:-1}catch(b){return a.e.log(gc,"Can not get status: "+b.message,h),-1}}function X(a,b){return b+" ["+a.wa+" "+a.ga+" "+uc(a)+"]"};function vc(a){this.j={};this.G=a;this.U={};this.ua=new nc;N(this.ua,"complete",this.Za,!1,this)}x(vc,Q);vc.prototype.call=function(a){console.log("ServiceMethod ["+this.G.name+"].call >");this.ua.send(wc(this,this.G.url,this.G.requiredURLParams,a),this.G.httpMethod,a)};vc.prototype.Za=function(a){var b=uc(a.target);b>399||b<200?a=new Gb("fault",a):(a=a.target,a=a.a?Nb(a.a.responseText):h,a=typeof a.ib!="undefined"&&a.ib==!1?new Gb("fault",a):new Gb("result",a));vb(this,a)};
function wc(a,b,c,d){for(var f=c.length-1;f>=0;f--){var e=c[f],g=b.split("{"+e+"}");typeof d[e]!="undefined"?b=g.join(d[e]):console.log("ERROR > Missing required URL param '"+e+"' for method '"+a.G.name+"'")}return b};var xc,Y,yc,zc;function Z(a,b){this.Q=new a;this.view=new b(this.Q);N(this.Q,"set_attribute",this.ha,!1,this)}x(Z,Q);Z.prototype.ha=k();Z.prototype.c=function(){this.view.c()};Z.prototype.h=function(){this.view.h()};function Ac(a){this.j={};this.cb=a;for(var b in a.methods){var c=a.methods[b];console.log("found method = "+c.name);typeof this[c.name]!="undefined"?console.log("WARNING > Duplicate method '"+c.name+"' for service '"+this.cb.name+"'. IGNORED!"):(console.log("adding method = "+c.name),this[c.name]=new vc(c))}}x(Ac,Q);function Bc(a){console.log(a);this.j={};this.La=a;this.U={}}x(Bc,Q);function Cc(a){var b=xc,c;if(typeof b.U[a]!="undefined")c=b.U[a];else if(typeof b.La[a]!="undefined")c=b.La[a],c.name=a,c=new Ac(c),b.U[a]=c;typeof c=="undefined"&&console.log("ERROR: Service '"+a+"' not found");return c};function Dc(a,b){Z.call(this,a,b);var c=this;this.Ja=function(){console.log("this.pushCallback > ");c.refresh()};this.t=Cc("Media")}x(Dc,Z);l=Dc.prototype;l.c=function(){this.view.c();N(this.t.listMedia,"result",this.Ca,!1,this);N(this.t.listMedia,"fault",this.Ba,!1,this);var a=Y.z.get();this.t.listMedia.call({event_id:a.id});this.na=yc.subscribe(a.id);this.na.bind("new_media",this.Ja);N(this.view.r,"click",this.q,!1,this);N(this.view.la,"click",this.ma,!1,this)};l.q=function(){$("events")};
l.refresh=function(){this.t.listMedia.call({event_id:Y.z.get().id})};
l.Ca=function(a){console.log("ListMedia result>");console.log(a.data);for(var b=this.view.S,c;c=b.firstChild;)b.removeChild(c);for(b=0;b<a.data.length;b++){var d=a.data[b];c={};c.url="http://photos.gthrng.com/"+d._id.$id+"_thumb.jpg";c.pb="http://photos.gthrng.com/"+d._id.$id+".jpg";c.$a=typeof d.user=="object"&&typeof d.user.name!="undefined"?d.user.name:"Unknown User";var f=c,d=Math.round((+new Date-new Date(d.uploaded*1E3))/1E3);month=2419200;year=month*12;var e=h;d<30?e="just now.":d<60?e=d+" seconds ago.":
d<120?e="a minute ago.":d<3600?e=Math.floor(d/60)+" minutes ago.":Math.floor(d/3600)==1?e="1 hour ago.":d<86400?e=Math.floor(d/3600)+" hours ago.":d<172800?e="yesterday":d<604800?e=Math.floor(d/86400)+" days ago.":d<1209600?e="a week ago.":d<month?e=Math.floor(d/604800)+" weeks ago.":d<2*month?e="a month ago.":d<year?e=Math.floor(d/month)+" months ago.":d<2*year?e="a year ago.":d>=2*year&&(e=Math.floor(d/year)+" years ago.");f.kb=e;f=new S;f.append('<li class="photoitem"><img src="',T(c.url),'" width="220" /><p class="owner">',
T(c.$a),'</p><p class="timestamp">',T(c.kb),'</p><hr class="clear"/></li>');c=f.toString();f=document.createElement("div");f.innerHTML=c;this.view.S.appendChild(f)}this.view.S.appendChild(db("hr",{"class":"clear"}));a=db("div",{id:"endoftimeline"});a.innerHTML="<p>This event is happening right now. Take some pictures!</p>";this.view.S.appendChild(a)};l.Ba=function(a){console.log("ListMedia fault>");console.log(a.data)};
l.Ra=function(a){var b,c;for(b=0,c=a.length;b<c;b+=1){var d=path=a[b].fullPath,f=new FileUploadOptions;f.fileKey="file";f.fileName=d.substr(d.lastIndexOf("/")+1);f.mimeType="image/jpeg";var e={key:"969490e925ae635134d0977aa6e74f9e",event_id:"62ad28eb85c44f36b1a6b755ab5a40ca"},g=Y.n.get();e.user_email=g.email;f.params=e;(new FileTransfer).upload(d,"http://api.gthrng.com/gathering/uploadMediaFile",Ec,Fc,f)}};l.Qa=function(a){console.log(a);Gc("An error occurred during capture: "+a.code)};
l.ma=function(){navigator.device.capture.captureImage(this.Ra,this.Qa,{qb:1,wb:50})};function Ec(a){zc.media.component.refresh();console.log("Code = "+a.responseCode);console.log("Response = "+a.response);console.log("Sent = "+a.bytesSent)}function Fc(a){alert("An error has occurred: Code = "+a.code);console.log("upload error source "+a.source);console.log("upload error target "+a.target)}
l.h=function(){this.view.h();this.na.unbind("new_media",this.Ja);O(this.view.la,"click",this.ma,!1,this);O(this.view.r,"click",this.q,!1,this);O(this.t.listMedia,"result",this.Ca);O(this.t.listMedia,"fault",this.Ba)};function Hc(a){P.call(this,a);this.vb=G("player-container")}x(Hc,P);Hc.prototype.c=function(){this.r=G("backbutton");this.Ua=G("eventlist")};function Ic(a){P.call(this,a)}x(Ic,P);Ic.prototype.c=function(){this.fb=G("no_account_link");this.xa=G("loginform");this.ob=G("email");this.ub=G("password")};function Jc(a){for(var b=[],c=Kc,d=a.elements,f,e=0;f=d[e];e++)if(!(f.disabled||f.tagName.toLowerCase()=="fieldset")){var g=f.name;switch(f.type.toLowerCase()){case "file":case "submit":case "reset":case "button":break;case "select-multiple":f=Lc(f);if(f!=i)for(var j,p=0;j=f[p];p++)c(b,g,j);break;default:j=Lc(f),j!=i&&c(b,g,j)}}d=a.getElementsByTagName("input");for(e=0;f=d[e];e++)if(f.form==a&&f.type.toLowerCase()=="image")g=f.name,c(b,g,f.value),c(b,g+".x","0"),c(b,g+".y","0");return b.join("&")}
function Kc(a,b,c){a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function Lc(a){var b=a.type;if(b===h)return i;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:i;case "select-one":return b=a.selectedIndex,b>=0?a.options[b].value:i;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:i;default:return a.value!==h?a.value:i}};function Mc(a,b){Z.call(this,a,b);this.g=Cc("Auth")}x(Mc,Z);l=Mc.prototype;l.c=function(){this.view.c();var a=this;this.view.xa.onsubmit=function(b){b.preventDefault();return a.V(b)};N(this.view.fb,"click",this.eb,!1,this);N(this.g.login,"result",this.Da,!1,this);N(this.g.login,"fault",this.ia,!1,this)};l.eb=function(){$("signup")};l.V=function(){this.g.login.call(Jc(this.view.xa));return!1};
l.Da=function(a){console.log("Login result>");console.log(a.data);if(Boolean(a.data.success)==!0){var b=a.data.result;if(typeof localStorage=="undefined")console.log("Your browser does not support HTML5 localStorage. Try upgrading.");else{localStorage.removeItem("user");try{localStorage.setItem("user",Pb(b))}catch(c){console.log("Storage quota exceeded!")}}Y.n.set(a.data.result);$("events")}else this.ia(a)};l.ia=function(a){console.log("Login fault>");Gc(a.data.message)};
l.h=function(){this.view.h();O(this.g.login,"result",this.Da);O(this.g.login,"fault",this.ia)};function Nc(){this.j={}}x(Nc,R);function Oc(a,b){Z.call(this,a,b);this.g=Cc("Auth")}x(Oc,Z);l=Oc.prototype;l.c=function(){this.view.c();var a=this;this.view.Na.onsubmit=function(b){b.preventDefault();return a.V(b)};N(this.g.signup,"result",this.Ga,!1,this);N(this.g.signup,"fault",this.Fa,!1,this);N(this.view.gb,"click",this.hb,!1,this);N(this.view.r,"click",this.q,!1,this)};l.q=function(){$("login")};l.hb=function(){this.V()};l.V=function(){this.g.signup.call(Jc(this.view.Na));return!1};
l.Ga=function(a){console.log("Signup result>");console.log(a.data);Y.n.set(a.data.result);$("events")};l.Fa=function(a){console.log("Signup fault>");console.log(a.data)};l.h=function(){this.view.h();O(this.g.signup,"result",this.Ga);O(this.g.signup,"fault",this.Fa)};var Pc={L:function(a,b){var c=b||new S;c.append('<div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Log in</p></div></div></div><p id="pagetitle">Create your Gathering account</p></div> <\!-- Header ends --\><form id="accountform" class="maincontent"><p class="wp7">Email address</p><input class="textfield" id="email" name="email" type="email" placeholder="Email address"><br/><p class="wp7">Your full name</p><input class="textfield" id="name" name="name" type="text" placeholder="Your full name"><p class="infotext">Fellow event guests will identify you by this name.</p><p class="wp7">Password</p><input class="textfield" id="password" name="password" type="password" placeholder="Password"><br/><p class="wp7">Password (again)</p><input class="textfield" id="password" name="retypepassword" type="password" placeholder="Password (again)"><br/><input class="checkbox" id="tos" name="tos" type="checkbox"><label for="tos">I have read and agree to the <a href="tos.html">Gathering Terms of Service</a>.</label><hr class="clear" /><div id="donebuttonwrapper"><div class="button bigbutton" id="donebutton"></div><p class="buttonlabel">Submit</p></div></form><hr class="clear" />');
if(!b)return c.toString()}};function Qc(a,b){Z.call(this,a,b);this.A=Cc("Events")}x(Qc,Z);l=Qc.prototype;l.c=function(){this.view.c();N(this.A.listEventsUsersIsInvited,"result",this.Aa,!1,this);N(this.A.listEventsUsersIsInvited,"fault",this.za,!1,this);this.A.listEventsUsersIsInvited.call({email:Y.n.get().email});N(this.view.r,"click",this.q,!1,this)};
l.qa=function(a){a:{var a=a.target,b=0;do{for(var c=0;c<this.o.length;c++)if(this.o[c].element==a){a=this.o[c].event;break a}a=a.parentNode;b++}while(a&&a!=document.body&&b<20);a=i}Y.z.set(a);$("media")};l.q=function(){typeof localStorage=="undefined"?console.log("Your browser does not support HTML5 localStorage. Try upgrading."):localStorage.removeItem("user");$("login")};
l.Aa=function(a){console.log("ListEvents result>");console.log(a.data);Rc(this);var b=Y.Ha.get();console.log("prevState = "+b);if(a.data.length==1&&b!="media")Y.z.set(a.data[0]),$("media");else for(b=0;b<a.data.length;b++){var c=a.data[b],d={};d.name=c.name;d.Ta=c.eventWhen;d.id=c.id;var c=d,f=new S;f.append('<li class="eventitem clearfix now"><div class="eventiteminfo"><h2>',T(c.name),"</h2><p>",T(c.Ta),'</p></div><div class="eventitembadge now"><p>Now</p></div></li>');c=f.toString();f=document.createElement("div");
N(f,"click",this.qa,!1,this);f.innerHTML=c;gb(f);this.o.push({element:f,event:d});this.view.Ua.appendChild(f)}};l.za=function(a){console.log("ListEvents fault>");console.log(a.data)};function Rc(a){if(typeof a.o!="undefined")for(var b=0;b<a.o.length;b++)O(a.o[b].element,"click",a.qa);a.o=[]}l.h=function(){this.view.h();Rc(this);O(this.view.r,"click",this.q,!1,this);O(this.A.listEventsUsersIsInvited,"result",this.Aa);O(this.A.listEventsUsersIsInvited,"fault",this.za)};var Sc={L:function(a,b){var c=b||new S;c.append('<div id="noscroll"><div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Events</p></div></div></div><p id="pagetitle">',T(a.event.name),'</p></div> <\!-- Header ends --\><div id="sidebar"><div id="camerabuttonwrapper"><p class="buttonlabel">Camera</p><div class="button bigbutton" id="camerabutton">&nbsp;</div></div></div></div><ul id="photolist" class="maincontent"></ul>');if(!b)return c.toString()}};function Tc(a){P.call(this,a)}x(Tc,P);Tc.prototype.c=function(){this.r=G("backbutton");this.S=G("photolist");this.la=G("camerabuttonwrapper")};function Uc(){this.j={}}x(Uc,R);function Vc(){this.j={};var a=this;this.state=zb(this,"state","login",function(b){a.Ha.set(a.state.get());return b});this.n=zb(this,"user",{},i);this.z=zb(this,"currentEvent",{},i);this.Ha=zb(this,"prevState",i,i)}x(Vc,R);var Wc={L:function(a,b){var c=b||new S;c.append('<div id="header"><div id="navbar"><div class="button" id="backbutton"><div><p>Log out</p></div></div></div><p id="pagetitle">All events for ',T(a.n.name),'</p></div> <\!-- Header ends --\><ul id="eventlist" class="maincontent"></ul>');if(!b)return c.toString()}};function Xc(){this.j={}}x(Xc,R);function $(a){Y.state.set(a)}function Gc(a){typeof navigator.notification!="undefined"&&typeof navigator.notification.alert!="undefined"?navigator.notification.alert(a,i,"Notification"):alert(a)}
function Yc(a){var d;if(a.Pa=="state"){console.log("state has changed!");var b;b=document;var c=i;(d=(c=$a(b)?b.querySelector(".state_container"):Za()[0])||i,b=d)&&b&&b.parentNode&&b.parentNode.removeChild(b);typeof wb!="undefined"&&(wb.h(),window.cleanScrolling());b=zc[a.I].template;c={n:Y.n.get(),event:Y.z.get()};b=b.L(c);c={"class":"container state_container"};if(a.I=="login")c.id="login";c=db("div",c);c.innerHTML=b;gb(c);document.body.appendChild(c);a.I=="login"?window.scrollLoginScreen():window.scrollOtherScreens();
wb=zc[a.I].component;wb.c()}}
window.gthrng_main=function(a){Y=new Vc;yc=a.pusher;xc=new Bc(a.services);N(Y,"set_attribute",Yc);var a=new Mc(Ab,Ic),b=new Oc(Uc,yb),c=new Qc(Xc,Hc),d=new Dc(Nc,Tc);zc={login:{template:Fb,component:a},signup:{template:Pc,component:b},events:{template:Wc,component:c},media:{template:Sc,component:d}};typeof localStorage=="undefined"?(console.log("Your browser does not support HTML5 localStorage. Try upgrading."),a=h):(a=localStorage.getItem("user"),a=typeof a!="undefined"?Nb(a):i);typeof a=="object"&&
a!=i?(Y.n.set(a),console.log("set currentState to events"),$("events")):(console.log("set currentState to login"),$("login"))};window.gthrng_setCurrentState=$;
